
SELECT * WHERE {
{ SELECT ?var11 ?var12 ?var13 WHERE  {  { { SELECT ?var11 (COUNT(?var14) AS ?var12)      WHERE       { ?var14 <http://www.wikidata.org/prop/direct/P31> <http://www.wikidata.org/entity/Q79007> ;           <http://www.wikidata.org/prop/direct/P17> ?var11 ;           <http://www.wikidata.org/prop/direct/P138> ?var15 .        ?var15 <http://www.wikidata.org/prop/direct/P21> <http://www.wikidata.org/entity/Q6581097>       }      GROUP BY ?var11     }    }   UNION    { { SELECT ?var11 (COUNT(?var14) AS ?var13)      WHERE       { ?var14 <http://www.wikidata.org/prop/direct/P31> <http://www.wikidata.org/entity/Q79007> ;           <http://www.wikidata.org/prop/direct/P17> ?var11 ;           <http://www.wikidata.org/prop/direct/P138> ?var15 .        ?var15 <http://www.wikidata.org/prop/direct/P21> <http://www.wikidata.org/entity/Q6581072>       }      GROUP BY ?var11     }    }  }  }
SIMILARITY JOIN ON ( ?var12, ?var13 ) ( ?var22, ?var23 )
TOP %d DISTANCE %s AS ?d 
{ SELECT ?var21 ?var22 ?var23 WHERE  {  { { SELECT ?var21 (COUNT(?var24) AS ?var22)      WHERE       { ?var24 <http://www.wikidata.org/prop/direct/P31> <http://www.wikidata.org/entity/Q79007> ;           <http://www.wikidata.org/prop/direct/P17> ?var21 ;           <http://www.wikidata.org/prop/direct/P138> ?var25 .        ?var25 <http://www.wikidata.org/prop/direct/P21> <http://www.wikidata.org/entity/Q6581097>       }      GROUP BY ?var21     }    }   UNION    { { SELECT ?var21 (COUNT(?var24) AS ?var23)      WHERE       { ?var24 <http://www.wikidata.org/prop/direct/P31> <http://www.wikidata.org/entity/Q79007> ;           <http://www.wikidata.org/prop/direct/P17> ?var21 ;           <http://www.wikidata.org/prop/direct/P138> ?var25 .        ?var25 <http://www.wikidata.org/prop/direct/P21> <http://www.wikidata.org/entity/Q6581072>       }      GROUP BY ?var21     }    }  }  }
}
